<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="menu-bar">
        <div class="top-bar">
        <p>ONLY <span id="countdown"></span> UNTIL ITS TOOOO LAAAATE</p>
        </div>
      
        <div class="navbar">
            <div class="menu-links-section left">
                <a href="">link</a>
                <a href="">link</a>
                <a href="">link</a>
                <a href="">link</a>
            </div>
    
            <div class="logo">
                <img src="" alt="logo">
            </div>
    
            <div class="menu-links-section right">
                <a href="">link</a>
                <a href="">link</a>
                <a href="">link</a>
                <a href="">link</a>
            </div>
        </div>
       
        <div class="bottom-bar">
            <div class="trackingPixel">
                <p>Do you know what a tracking pixel is?</p>
            </div>
            <form class="search-bar-section" action="/action_page.php">
                <input type="text" class="text-search-input"placeholder="Search.." name="search">
                <button type="submit" class="search-bar-submit-button"><img src="assets/search.png" alt="magnifying-glass-search-icon"></button>
              </form>
        </div>
        
    </div>
    <div class="banner">
    <div id="banner-top-bar">
        <p>MORE INFORMATION MORE INFORMATION MORE INFORMATION MORE INFORMATION MORE INFORMATION MORE INFORMATIONMORE INFORMATIONMORE INFORMATION MORE INFORMATION MORE INFORMATION MORE INFORMATION MORE INFORMATION MORE INFORMATION</p>
    </div>
<h3>Fantasmagorique banner</h3>
    </div>

    <div class="pop-up isClosed" id="pop-1">
    <div class="close-pop-up">
        X
    </div>
    <div class="pop-up-content">
          <h1>THIS IS A POP UPPPP </h1>
    </div>
    </div>
<div class="buttons-banner">
    <div class="button" id="button-01">
<p>a sale</p>
    </div>
    <div class="button" id="button-02">
    <p> ANOTHER SALE</p>
    </div>
    <div class="button" id="button-03">
        <p>        MEGA SALE
        </p>
    </div>
</div>
    <div class="page">

    </div>
</body>

<script>
$(document).ready(function(){

  //change menu bar when scrolling  
    var lastScrollTop = 0, delta = 5;
	 $(window).scroll(function(){
		 var nowScrollTop = $(this).scrollTop();
		 if(Math.abs(lastScrollTop - nowScrollTop) >= delta){
		 	if (nowScrollTop > lastScrollTop){
		 		// console.log("scrolling down")
                 $(".menu-bar").css("height","10vh");
		 	} else {
		 		// ACTION ON
                //  console.log("scrolling up")
                 $(".menu-bar").css("height","20vh");
			}
		 lastScrollTop = nowScrollTop;
		 }
	 });


    //close/open pop-up

    let popupOpenTimeOut = setTimeout(openPopup, 3000);

   $(".close-pop-up").click(function(){
    if($(this).parent().hasClass("isOpened")){
        $(this).parent().removeClass("isOpened")
        $(this).parent().addClass("isClosed")
        setTimeout(()=>{
            $(this).parent().removeClass("isClosed")
            $(this).parent().addClass("isOpened")
        }, 5000)
    }else if($(this).parent().hasClass("isClosed")){
        $(this).parent().removeClass("isClosed")
        $(this).parent().addClass("isOpened")
    }
   })

   function openPopup(){
    $(".pop-up").removeClass("isClosed")
    $(".pop-up").addClass("isOpened")
   }
   //get countdown to midnight
   //from: https://stackoverflow.com/questions/54256629/countdown-to-midnight-refresh-every-day
   const Countdown = (() => {

let nextMidnight = new Date();
nextMidnight.setHours(24,0,0,0);

const getRemainingTime = () => {
  let now = new Date();

  let time = (nextMidnight.getTime() - now.getTime())/1000;
  
  if(time < 0) {
    nextMidnight = new Date();
    nextMidnight.setHours(24,0,0,0);
    
    return getRemainingTime();
  }
  
  return time;
}

const parseTime = (time) => {
  const hours = Math.floor(time/3600);
  let rest = time-(hours*3600);
  const minutes = Math.floor(rest/60);
  rest = rest-(minutes*60);
  const seconds = Math.floor(rest);
  const milliseconds = (rest-seconds)*1000;

  return [hours, minutes, seconds, milliseconds];
};

const formatTime = (parsedTime) => {
    return '<span class="hours">' + parsedTime[0] + '</span><span class="hSep">:</span><span class="minutes">' + ("0" + parsedTime[1]).slice(-2) + '</span><span class="mSep">:</span><span class="seconds">' + ("0" + parsedTime[2]).slice(-2) + '</span>';
};

const els = [];
let timeout;

return (el) => {
  els.push(el);
  
  if(!timeout) {
  
    const refresh = () => {
      const parsedTime = parseTime(getRemainingTime());
      const formattedTimes = formatTime(parsedTime);
      
      for(let i = 0, iend = els.length; i < iend; i++) {
        els[i].innerHTML = formattedTimes;
      }
      
      setTimeout(() => {
        refresh();
      }, parsedTime[3]);
    };
    refresh();
    
  }
  else el.innerHTML = formatTime(parseTime(getRemainingTime()));
};

})();
Countdown(document.getElementById('countdown'));

 });


</script>
</html>